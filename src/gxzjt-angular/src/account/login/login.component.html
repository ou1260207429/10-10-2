<div [@routerTransition]>
  <nz-spin [nzTip]="l('LogIningWithThreeDot')" [nzSpinning]="submitting">
    <nz-card [nzTitle]="nzTitle" nzHoverable='true'>
      <ng-template #nzTitle>
        <div class="text-center yoyo__block title">
          <img src="/assets/images/logo.png" /><br />
          <span>广西建设工程消防设计审查与验收管理平台</span>
        </div>
      </ng-template>
      <form nz-form #loginForm="ngForm" role="form" novalidate (ngSubmit)="login()" method="post" class="login-form">
        <br>
        <!-- 账号 -->
        <nz-form-item>
          <nz-form-control>
            <nz-input-group nzSize="large" nzPrefixIcon="anticon anticon-user">
              <input nz-input name="userNameOrEmailAddress" #userNameOrEmailAddressInput="ngModel"
                [(ngModel)]="loginService.authenticateModel.userNameOrEmailAddress" placeholder="请输入电话号码" required
                maxlength="20">
            </nz-input-group>
            <nz-form-explain *ngIf="userName.dirty && userName.errors">
              请输入正确的电话号码!
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>

        <!-- 密码 -->
        <nz-form-item>
          <nz-form-control>
            <nz-input-group nzSize="large" nzPrefixIcon="anticon anticon-lock">
              <input nz-input name="password" #passwordInput="ngModel"
                [(ngModel)]="loginService.authenticateModel.password" [placeholder]="l('Password')" type="password"
                required maxlength="32">
            </nz-input-group>
            <nz-form-explain *ngIf="password.dirty && password.errors">
              请输入密码!
            </nz-form-explain>
          </nz-form-control>
        </nz-form-item>


        <!-- 验证码 -->
        <nz-form-item>
          <nz-form-control>
            <nz-input-group>

              <nz-row [nzGutter]="8">
                <nz-col [nzSpan]="16">
                  <nz-input-group nzSize="large" nzPrefixIcon="anticon anticon-mail">
                    <input nz-input formControlName="captcha" placeholder="验证码" />
                  </nz-input-group>
                  <nz-form-explain *ngIf="captcha.dirty && captcha.errors">
                    请输入正确的验证码
                  </nz-form-explain>
                </nz-col>
                <nz-col [nzSpan]="8">
                  <button type="button" nz-button nzSize="large" (click)="getCaptcha()" [disabled]="count" nzBlock
                    [nzLoading]="http.loading">
                    {{ count ? count + 's' : '获取验证码' }}
                  </button>
                </nz-col>
              </nz-row>
            </nz-input-group>



          </nz-form-control>
        </nz-form-item>
        <!-- 记住我 -->

        <nz-form-item>
          <nz-col [nzSpan]="12">

            <label nz-checkbox [(ngModel)]="loginService.rememberMe" name="rememberMe" id="rememberme">
              <span>{{l("RememberMe")}}</span>
            </label>
          </nz-col>

          <!-- //todo:忘记密码 等待有缘人帮我们完善吧-
           <nz-col [nzSpan]="12" class="text-right">
            <a routerLink="/account/forgot-password" class="forgot forget-password">{{l("ForgotPassword")}}</a>
          </nz-col>  -->

        </nz-form-item>

        <!-- 登陆按钮 -->

        <button nz-button [nzLoading]="submitting" class="yoyo__block login_but"
          [disabled]="!loginForm.form.valid||submitting">
          <!-- <i class="anticon anticon-login"></i> -->
          <span>{{l("LogIn")}}</span>
        </button>
      </form>

      <div class="other">

        <a class="register" routerLink="/passport/register">前往注册</a>
      </div>

    </nz-card>
  </nz-spin>
</div>